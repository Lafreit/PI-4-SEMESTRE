{% load static %}

{% block extra_head %}
    <!-- CSS do Leaflet para o mapa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Seu CSS da p√°gina de resultados -->
    <link rel="stylesheet" href="{% static 'corrida/css/resultados_busca.css' %}">
{% endblock %}
<title>Carona | Buscar Carona</title>
{% block content %}
<div class="main-page-wrapper">

    <!-- üåü IN√çCIO DA NAVBAR FIXA üåü -->
    <nav class="top-navbar" id="mainNavbar">
        <div class="logo-area">
    <img src="{% static 'img/logo.png' %}" alt="Logo Carona F√°cil" class="logo-img">
</div>
        <div class="menu">
            <a href="{% url 'usuarios:pagina_inicial' %}" class="menu-item">In√≠cio</a>
            <a href="{% url 'usuarios:meu_perfil' %}" class="menu-item">Meu Perfil</a>
            <a href="{% url 'corrida:lista_corridas' %}" class="menu-item active">Minhas Viagens</a>
            <a href="#" class="menu-item">Central de Ajuda</a>
        </div>

        <div class="user-and-logout">
            <div class="user-info-navbar">
                <!-- Assume-se que 'imgusu.png' √© o avatar padr√£o -->
                <img src="{% static 'img/imgusu.png' %}" alt="Avatar" class="user-avatar-small">
                <span>{{ user.nome|default:"Sara" }}</span>
            </div>
            <a href="{% url 'usuarios:logout' %}" class="action-btn logout-btn btn-danger">Sair</a>
        </div>
    </nav>
    <!-- üåü FIM DA NAVBAR üåü -->

    <main class="main-content">
        <div class="container-centralizado">
            
            <!-- Layout principal: Busca/Resultados (Esquerda) e Mapa (Direita) -->
            <div class="results-layout">
                
                {# COLUNA DA ESQUERDA: PAINEL DE BUSCA E LISTA DE RESULTADOS #}
                <div class="search-and-list-column">
                    
                    <!-- Painel de Busca com Filtros -->
                    <div class="search-panel">
                        <h2>Encontre sua carona üîé</h2>

                        <div class="inputs-row">
                            <input type="text" id="origemInput" placeholder="Origem (ex: Santo Andr√©)">
                            <input type="text" id="destinoInput" placeholder="Destino (ex: Nova Odessa)">
                        </div>

                        <div class="tolerancia-container">
                            <label for="toleranciaRange">Toler√¢ncia:</label>
                            <input type="range" id="toleranciaRange" min="100" max="5000" step="100" value="600">
                            <span id="toleranciaValor">600</span> m
                        </div>

                        <button id="buscarBtn" class="action-btn primary-btn">Buscar corridas</button>
                    </div>
                    
                    <!-- Lista de Corridas -->
                        <h3 class="results-heading">Corridas Encontradas: (3)</h3>
                        <div id="corridasContainer">
                            
                            <!-- Card 1: Exemplo de Resultado -->
                            <div class="corrida-card">
                                <h4>Rota: Santo Andr√© -> Nova Odessa</h4>
                                <p>Motorista: Jo√£o Silva</p>
                                <p>Hor√°rio de Partida: 07:30</p>
                                <p class="details-meta">Valor: R$ 15,00 | Vagas: 3</p>
                                <button class="solicitar-btn secondary-btn">Ver Detalhes</button>
                            </div>
                            
                            <!-- Card 2: Exemplo de Resultado -->
                            <div class="corrida-card">
                                <h4>Rota: S√£o Paulo -> Campinas</h4>
                                <p>Motorista: Maria Souza</p>
                                <p>Hor√°rio de Partida: 08:00</p>
                                <p class="details-meta">Valor: R$ 25,00 | Vagas: 2</p>
                                <button class="solicitar-btn secondary-btn">Ver Detalhes</button>
                            </div>
                        </div>
                </div>

                {# COLUNA DA DIREITA: MAPA E DICAS #}
                <div class="map-and-tips-column">
                    
                    <div id="map-container">
                        <div id="map"></div>
                    </div>
                    
                    <section class="tips-section">
                        <h4>Ajuda Visual no Mapa</h4>
                        <ul class="tips-list">
                            <li>
                                <p>Os marcadores indicam a Origem (P) e o Destino (D) das caronas.</p>
                            </li>
                            <li>
                                <p>A √°rea colorida em volta dos marcadores mostra a Toler√¢ncia.</p>
                            </li>
                            <li>
                                <p>Clique em um card para destac√°-lo no mapa.</p>
                            </li>
                        </ul>
                    </section>
                </div>
                
            </div>
            
        </div>
    </main>
</div>

<!-- ====== SCRIPTS ====== -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="{% static 'corrida/js/resultados_busca.js' %}" defer></script>

{% endblock %}
