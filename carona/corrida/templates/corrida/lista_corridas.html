{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'corrida/css/lista_corridas.css' %}">
{% endblock %}

{% block content %}
<div class="corridas-container">
    <h2>Minhas Corridas ðŸš—</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="alert {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}

    {% if corridas %}
        <div class="table-responsive">
            <table class="corridas-table">
                <thead>
                    <tr>
                        <th>Origem</th>
                        <th>Destino</th>
                        <th>Data</th>
                        <th>SaÃ­da</th>
                        <th>Chegada</th>
                        <th>Vagas</th>
                        <th>Valor</th>
                        <th>Status</th>
                        <th>AÃ§Ãµes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for corrida in corridas %}
                        <tr class="{% if corrida.status == 'cancelada' %}cancelada{% endif %}">
                            <td>{{ corrida.origem }}</td>
                            <td>{{ corrida.destino }}</td>
                            <td>{{ corrida.data|date:"d/m/Y" }}</td>
                            <td>{{ corrida.horario_saida }}</td>
                            <td>{{ corrida.horario_chegada }}</td>
                            <td>{{ corrida.vagas_disponiveis }}</td>
                            <td>R$ {{ corrida.valor }}</td>
                            <td>{{ corrida.get_status_display }}</td>
                            <td>
                                <a href="{% url 'corrida:editar_corrida' corrida.id %}" class="btn editar">Editar</a>

                                <form action="{% url 'corrida:cancelar_corrida' corrida.id %}" method="post" class="inline-form" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="btn {% if corrida.status == 'cancelada' %}reativar{% else %}cancelar{% endif %}">
                                        {% if corrida.status == 'cancelada' %}Reativar{% else %}Cancelar{% endif %}
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>VocÃª ainda nÃ£o cadastrou nenhuma corrida.</p>
    {% endif %}
</div>
{% endblock %}
